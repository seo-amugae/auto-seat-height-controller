# 차량 승하차 편의를 위한 자동 시트 조절기

## 프로젝트 소개

순정 '이지억세스' 옵션이 없는 차량에 아두이노와 릴레이를 이용해 해당 기능을 구현한 개인 프로젝트입니다.

차량의 시동 상태(IG1)와 기어 상태(Parking) 신호를 감지하여, 시동을 끄거나 P단에 놓으면 시트를 하강시켜 하차를 편하게 하고, 시동을 걸고 P단에서 벗어나면 시트를 상승시킵니다.

## 주요 동작 로직

`Auto_Seat.ino` 코드의 `loop()` 함수에 메인 로직이 구현되어 있습니다. 

1.  **시트 하강 (하차 시)**
    * **조건:** 시트가 '상단 위치'일 때, ①시동을 끄거나 ②기어를 P단으로 옮기면
    * **동작:** 시트를 5.5초간 하강시킵니다. 
    * **예외 처리:** 하강 도중 다시 시동을 걸고 기어를 P단에서 변경하면, 즉시 하강을 멈추고 '상단 위치'로 복귀합니다. 

2.  **시트 상승 (주행 시)**
    * **조건:** 시트가 '하단 위치'일 때, ①시동이 켜진 상태에서 ②기어를 P단에서 변경하면
    * **동작:** 0.5초간 신호 안정화를 거친 후, 시트를 6.0초간 상승시킵니다. 
    * **예외 처리:** 상승 도중 시동을 끄거나 기어를 P단으로 복귀시키면, 즉시 상승을 멈추고 '하단 위치'로 복귀합니다. 

3.  **상태 저장 (EEPROM)**
    * 시트의 현재 상태(상단, 하단)는 아두이노의 `EEPROM`에 기록됩니다. 
    * 이를 통해 차량 전원이 완전히 차단되었다가 다시 켜져도 시트가 불필요하게 움직이지 않고 마지막 상태를 기억합니다. 

## 하드웨어 및 핀맵

* **MCU:** Arduino Nano
* **Actuator:** 2채널 릴레이 모듈
* **`D7` (Input):** `ignitionPin` (IG1 신호 입력, HIGH = ON) 
* **`A0` (Input):** `parkingPin` (P단 신호 입력, Analog) 
* **`D8` (Output):** `seatRelayD8` (릴레이 1) 
* **`D9` (Output):** `seatRelayD9` (릴레이 2) 

## 참고 사항

* `setRelay()` 함수에서 `LOW` 신호로 릴레이를 켜도록 설정되어 있습니다. (Active-Low 릴레이 모듈을 기준으로 작성하였습니다.)
* P단 감지 임계값(`950`)은 제 차량의 P단 신호 전압(12V)을 5V 레벨로 낮추는 과정에서 값이 일정한 범위 내에서 임의지정한 값입니다.
* **차량마다 이 전압 값은 다를 수 있으므로,** `analogRead`로 실제 값을 측정한 뒤 `measurement()` 함수의 임계값을 튜닝해야 합니다.
